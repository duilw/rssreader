{% extends 'layout.html' %}
{% block body %}
<script>
    function expand(id) {
        $('#content' + id).slideToggle();
        $.post("{{ url_for('api.mark_read') }}", { entry_id: id });
    }
</script>
<div class="row top-buffer">
    <div class="span3">
        <ul class="nav nav-list sidebar">
            <li>
                <a href="{{ url_for('feeds.index') }}">All items</a>
                {% for feed in feeds %}
            </li>
            <li>
                <a href="{{ url_for('feeds.single_feed', feed_id=feed.id) }}">
                {{ feed.get_title() }}
                {{ feed.get_unread_entries_count() }}
                </a>
            </li>
            {% endfor %}
        </ul>
    </div>
    <div class="span9">
        <ul class="nav nav-list">
            {% for entry in entries %}
            <li>
            <a onclick="expand('{{ entry.id }}');">
                {{ entry.title }}
                &ndash;
                <span>{{ entry.created_at }}</span>
            </a>
            <div class="well" style="display:none" id="content{{ entry.id }}">
                {{ entry.content|safe }}
            </div>
            </li>
            {% endfor %}
        </ul>
    </div>
</div>
{% endblock %}
